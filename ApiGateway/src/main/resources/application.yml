spring:
  application:
    name: ApiGateway

  cloud:
    client:
      hostname: localhost
    gateway:
      routes:
        - id: UserService
          uri: ${USER_SERVICE_URI:lb://USER-SERVICE}
          predicates:
            - Path=/api/v1/auth/**
          filters:
            - StripPrefix=2

        # Use ONE Path predicate with multiple patterns (comma-separated)
        - id: PostService
          uri: ${POSTS_SERVICE_URI:lb://POSTS-SERVICE}
          predicates:
            - Path=/api/v1/posts/**, /api/v1/likes/**
          filters:
            - StripPrefix=2
            - name: AuthFilter

        - id: ConnectionService
          uri: ${CONNECTIONS_SERVICE_URI:lb://CONNECTIONS-SERVICE}
          predicates:
            - Path=/api/v1/connections/**
          filters:
            - StripPrefix=2
            - name: AuthFilter

server:
  port: 8080

jwt:
  secretKey: dakfjladsjflajsdfljasdlfjadslgvhnkjabrkgjvhjkfbrfbdkjdfsfsdgsdfgsfdgadfgvsdfgerh45565rtgsfdv

  # 2) Base64-encoded key (set the flag below to true)
  # secretKey: "Jm3lNw...base64..."
  secretKeyBase64: false

  # Accept small clock drift between services
  clockSkewSeconds: 60

eureka:
  client:
    service-url:
      defaultZone: http://DiscoveryServer:8761/eureka
    register-with-eureka: true
    fetch-registry: true
#  instance:
#    prefer-ip-address: true
#    ip-address: 127.0.0.1
#    hostname: localhost
#    instance-id: "${spring.application.name}:${server.port}"
#    non-secure-port: 8080

management:
  endpoints:
    web:
      exposure:
        include: health,info
